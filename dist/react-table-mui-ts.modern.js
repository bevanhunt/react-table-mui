import{Chip as e,Checkbox as t,TablePagination as n,Popover as r,Typography as i,FormControlLabel as a,Button as o,Toolbar as l,Tooltip as s,IconButton as c,TableSortLabel as u,TextField as d}from"@mui/material";import m from"@mui/icons-material/KeyboardArrowRight";import p from"@mui/icons-material/KeyboardArrowUp";import g from"classnames";import f,{useState as v,useEffect as b,useCallback as x}from"react";import{useTable as C,useColumnOrder as w,useFilters as y,useGroupBy as N,useSortBy as k,useExpanded as P,useFlexLayout as R,usePagination as T,useResizeColumns as S,useRowSelect as A}from"react-table";import{makeStyles as z,createStyles as F,styled as I}from"@mui/styles";import{matchSorter as O}from"match-sorter";import{createTheme as B}from"@mui/system";import H from"@mui/material/Table";import D from"@mui/material/TableBody";import L from"@mui/material/TableCell";import G from"@mui/material/TableHead";import E from"@mui/material/TableRow";import j from"@mui/material/IconButton";import W from"@mui/icons-material/FirstPage";import V from"@mui/icons-material/KeyboardArrowLeft";import M from"@mui/icons-material/LastPage";import _ from"@mui/icons-material/Add";import K from"@mui/icons-material/CreateOutlined";import U from"@mui/icons-material/DeleteOutline";import J from"@mui/icons-material/FilterList";import Z from"@mui/icons-material/ViewColumn";function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}var Q=z(F({filtersActiveLabel:{color:"#998",fontSize:"14px",paddingRight:10},chipZone:{padding:"18px 0 5px 10px",width:"100%"},chipLabel:{fontWeight:500,marginRight:5},filterChip:{marginRight:4,color:"#222"}})),X=function(e,t){if("between"===e.filter){var n=t[0],r=t[1];return n?r?n+"-"+r:">="+n:"<="+r}return t};function Y(t){var n=t.instance,r=Q({}),i=n.allColumns,a=n.setFilter,o=n.state.filters,l=x(function(e){a(e,void 0)},[a]);return Object.keys(o).length>0?h("div",{className:r.chipZone},h("span",{className:r.filtersActiveLabel},"Active filters:"),o&&i.map(function(t){var n=o.find(function(e){return e.id===t.id}),i=n&&n.value;return i&&h(e,{className:r.filterChip,key:t.id,label:h(Fragment,null,h("span",{className:r.chipLabel},t.render("Header"),":"," "),X(t,i)),onDelete:function(){return l(t.id)},variant:"outlined"})})):null}function ee(e,t,n){return O(e,n,{keys:[function(e){return e.values[t[0]]}]})}ee.autoRemove=function(e){return!e};var te=/([=<>!]*)\s*((?:[0-9].?[0-9]*)+)/;function ne(e,t,n){var r=function(e){var t=function(t){return t==e},n=te.exec(e);if(!n)return t;switch(n[1]){case">":return function(e){return parseFloat(e)>parseFloat(n[2])};case"<":return function(e){return parseFloat(e)<parseFloat(n[2])};case"<=":return function(e){return parseFloat(e)<=parseFloat(n[2])};case">=":return function(e){return parseFloat(e)>=parseFloat(n[2])};case"=":return function(e){return parseFloat(e)===parseFloat(n[2])};case"!":return function(e){return parseFloat(e)!==parseFloat(n[2])}}return t}(n);return e.filter(function(e){return r(e.values[t[0]])})}ne.autoRemove=function(e){return!e};var re=["children","className"],ie=["children","className"],ae=["children","className"],oe=["children","className"],le=["children","className"],se=["children","className"],ce=["children","className"],ue=["children","className"],de=z(function(e){return F({tableTable:{borderSpacing:0,border:"1px solid rgba(224, 224, 224, 1)",width:"100%"},tableHead:{},tableHeadRow:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,borderBottom:"1px solid rgba(224, 224, 224, 1)","&:hover $resizeHandle":{opacity:1}},tableHeadCell:{padding:"16px 1px 16px 16px",fontSize:"0.875rem",textAlign:"left",verticalAlign:"inherit",color:e.palette.text.primary,fontWeight:500,lineHeight:"1.5rem",borderRight:"1px solid rgba(224, 224, 224, 1)","&:last-child":{borderRight:"none"}},tableBody:{},tableRow:{color:"inherit",outline:0,verticalAlign:"middle","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.07)"},borderBottom:"1px solid rgba(224, 224, 224, 1)","&:last-child":{borderBottom:"none"},"&.rowSelected":{backgroundColor:"rgba(0, 0, 0, 0.04)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.07)"}},"&.clickable":{cursor:"pointer"}},tableLabel:{},tableCell:{padding:"8px 16px",fontSize:"0.875rem",textAlign:"left",fontWeight:300,lineHeight:1.3,verticalAlign:"inherit",color:e.palette.text.primary,borderRight:"1px solid rgba(224, 224, 224, 1)","&:last-child":{borderRight:"none"}},resizeHandle:{position:"absolute",cursor:"col-resize",zIndex:100,opacity:0,borderLeft:"1px solid "+e.palette.primary.light,borderRight:"1px solid "+e.palette.primary.light,height:"50%",top:"25%",transition:"all linear 100ms",right:-2,width:3,"&.handleActive":{opacity:1,border:"none",backgroundColor:e.palette.primary.light,height:"calc(100% - 4px)",top:"2px",right:-1,width:1}},tableSortLabel:{"& svg":{width:16,height:16,marginTop:0,marginLeft:2}},headerIcon:{"& svg":{width:16,height:16,marginTop:4,marginRight:0}},iconDirectionAsc:{transform:"rotate(90deg)"},iconDirectionDesc:{transform:"rotate(180deg)"},cellIcon:{"& svg":{width:16,height:16,marginTop:3}}})}),he=function(e,t){return e.checked===t.checked&&e.indeterminate===t.indeterminate};B();var me=function(e){var t=e.children,n=e.className,r=q(e,re),i=de();return h(H,$({className:g(n,i.tableTable)},r),t)},pe=function(e){var t=e.children,n=e.className,r=q(e,ie),i=de();return h(D,$({className:g(n,i.tableBody)},r),t)},ge=function(e){var t=e.children,n=e.className,r=q(e,ae),i=de();return h(G,$({className:g(n,i.tableHead)},r),t)},fe=function(e){var t=e.children,n=e.className,r=q(e,oe),i=de();return h(E,$({className:g(n,i.tableHeadRow)},r),t)},ve=function(e){var t=e.children,n=e.className,r=q(e,le),i=de();return h(L,$({className:g(n,i.tableHeadCell)},r),t)},be=function(e){var t=e.children,n=e.className,r=q(e,se),i=de();return h(E,$({className:g(n,i.tableRow)},r),t)},xe=function(e){var t=e.children,n=e.className,r=q(e,ce),i=de();return h(L,$({className:g(n,i.tableCell)},r),t)},Ce=function(e){var t=e.children,n=e.className,r=q(e,ue),i=de();return h("div",$({className:g(n,i.tableLabel)},r),t)},we=f.memo(I(t)({fontSize:"1rem",margin:"-8px 0 -8px -15px",padding:"8px 9px","& svg":{width:"24px",height:"24px"},"&:hover":{backgroundColor:"transparent"}}),he),ye=f.memo(I(t)({fontSize:"14px",margin:"-9px 0 -8px -15px",padding:"5px 9px","&:hover":{backgroundColor:"transparent"},"& svg":{width:24,height:24}}),he);function Ne(e){var t,n=e.column,r=de();return h("div",$({},n.getResizerProps(),{style:{cursor:"col-resize"},className:g((t={},t[r.resizeHandle]=!0,t.handleActive=n.isResizing,t))}))}var ke=[10,25,50],Pe=f.memo(n,function(e,t){return e.count===t.count&&e.rowsPerPage===t.rowsPerPage&&e.page===t.page&&e.onChangePage===t.onChangePage&&e.onChangeRowsPerPage===t.onChangeRowsPerPage});function Re(e){var t=z(function(e){return F({root:{flexShrink:0,marginLeft:e.spacing(2.5)}})})(),n=e.count,r=e.page,i=e.rowsPerPage,a=e.onPageChange;return h("div",{className:t.root},h(j,{onClick:function(e){a(e,0)},disabled:0===r,"aria-label":"first page"},h(W,null)),h(j,{onClick:function(e){a(e,r-1)},disabled:0===r,"aria-label":"previous page"},h(V,null)),h(j,{onClick:function(e){a(e,r+1)},disabled:r>=Math.ceil(n/i)-1,"aria-label":"next page"},h(m,null)),h(j,{onClick:function(e){a(e,Math.max(0,Math.ceil(n/i)-1))},disabled:r>=Math.ceil(n/i)-1,"aria-label":"last page"},h(M,null)))}function Te(e){var t=e.instance,n=t.state,r=n.pageIndex,i=n.pageSize,a=n.rowCount,o=void 0===a?t.rows.length:a,l=t.gotoPage,s=t.nextPage,c=t.previousPage,u=t.setPageSize,d=x(function(e,t){t===r+1?s():t===r-1?c():l(t)},[l,s,r,c]),m=x(function(e){u(Number(e.target.value))},[u]);return o?h(Pe,{sx:{".MuiTablePagination-selectLabel":{paddingTop:"12px"},".MuiTablePagination-displayedRows":{paddingTop:"15px"}},rowsPerPageOptions:ke,component:"div",count:o,rowsPerPage:i,page:r,onPageChange:d,onRowsPerPageChange:m,ActionsComponent:Re}):null}var Se=z(F({columnsPopOver:{padding:24},popoverTitle:{fontWeight:500,padding:"0 24px 24px 0",textTransform:"uppercase"},grid:{display:"grid",gridTemplateColumns:"repeat(2, 198px)","@media (max-width: 600px)":{gridTemplateColumns:"repeat(1, 160px)"},gridColumnGap:6,gridRowGap:6}}));function Ae(e){var n=e.instance,o=e.anchorEl,l=e.onClose,s=e.show,c=Se({}),u=n.toggleHideColumn,d=n.allColumns.filter(function(e){return!("_selector"===e.id)}),m=d.reduce(function(e,t){return e+(t.isVisible?0:1)},0)+1>=d.length;return d.length>1?h("div",null,h(r,{anchorEl:o,className:c.columnsPopOver,id:"popover-column-hide",onClose:l,open:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},h("div",{className:c.columnsPopOver},h(i,{className:c.popoverTitle},"Visible Columns"),h("div",{className:c.grid},d.map(function(e){return h(a,{key:e.id,control:h(t,{value:""+e.id,disabled:e.isVisible&&m}),label:e.render("Header"),checked:e.isVisible,onChange:function(){return u(e.id,e.isVisible)}})}))))):null}var ze=z(F({columnsPopOver:{padding:24},filtersResetButton:{position:"absolute",top:18,right:21},popoverTitle:{fontWeight:500,padding:"0 24px 24px 0",textTransform:"uppercase"},grid:{display:"grid",gridTemplateColumns:"repeat(2, 218px)","@media (max-width: 600px)":{gridTemplateColumns:"repeat(1, 180px)"},gridColumnGap:24,gridRowGap:24},cell:{width:"100%",display:"inline-flex",flexDirection:"column"},hidden:{display:"none"}}));function Fe(e){var t=e.instance,n=e.anchorEl,a=e.onClose,l=e.show,s=ze({}),c=t.allColumns,u=t.setAllFilters,d=x(function(e){e.preventDefault(),a()},[a]),m=x(function(){u([])},[u]);return h("div",null,h(r,{anchorEl:n,id:"popover-filters",onClose:a,open:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},h("div",{className:s.columnsPopOver},h(i,{className:s.popoverTitle},"Filters"),h("form",{onSubmit:d},h(o,{className:s.filtersResetButton,color:"primary",onClick:m},"Reset"),h("div",{className:s.grid},c.filter(function(e){return e.canFilter}).map(function(e){return h("div",{key:e.id,className:s.cell},e.render("Filter"))})),h(o,{className:s.hidden,type:"submit"},"Â ")))))}var Ie=z(function(){return F({toolbar:{display:"flex",justifyContent:"space-between"},leftButtons:{},rightButtons:{},leftIcons:{"&:first-of-type":{marginLeft:-12}},rightIcons:{padding:12,marginTop:"-6px",width:48,height:48,"&:last-of-type":{marginRight:-12}}})});function Oe(e){var t,n=e.instance,r=e.icon,i=e.onClick,a=e.label,o=e.enabled,l=void 0===o?function(){return!0}:o,u=e.variant,d=Ie({});return h(s,{title:a,"aria-label":a},h("span",null,h(c,{className:g((t={},t[d.rightIcons]="right"===u,t[d.leftIcons]="left"===u,t)),onClick:i(n),disabled:!l(n)},r)))}function Be(e){var t,n=e.icon,r=e.onClick,i=e.label,a=e.enabled,o=void 0===a||a,l=e.variant,u=Ie({});return h(s,{title:i,"aria-label":i},h("span",null,h(c,{className:g((t={},t[u.rightIcons]="right"===l,t[u.leftIcons]="left"===l,t)),onClick:r,disabled:!o},n)))}function He(e){var t=e.instance,n=e.onAdd,r=e.onDelete,i=e.onEdit,a=t.columns,o=Ie(),s=v(void 0),c=s[0],u=s[1],d=v(!1),m=d[0],p=d[1],g=v(!1),f=g[0],b=g[1],C=a.filter(function(e){return!("_selector"===e.id)}),w=x(function(e){u(e.currentTarget),p(!0)},[u,p]),y=x(function(e){u(e.currentTarget),b(!0)},[u,b]),N=x(function(){p(!1),b(!1),u(void 0)},[]);return h(l,{className:o.toolbar},h("div",{className:o.leftButtons},n&&h(Oe,{instance:t,icon:h(_,null),onClick:n,label:"Add",enabled:function(e){var t=e.state;return!t.selectedRowIds||0===Object.keys(t.selectedRowIds).length},variant:"left"}),i&&h(Oe,{instance:t,icon:h(K,null),onClick:i,label:"Edit",enabled:function(e){var t=e.state;return t.selectedRowIds&&1===Object.keys(t.selectedRowIds).length},variant:"left"}),r&&h(Oe,{instance:t,icon:h(U,null),onClick:r,label:"Delete",enabled:function(e){var t=e.state;return t.selectedRowIds&&Object.keys(t.selectedRowIds).length>0},variant:"left"})),h("div",{className:o.rightButtons},h(Ae,{instance:t,onClose:N,show:m,anchorEl:c}),h(Fe,{instance:t,onClose:N,show:f,anchorEl:c}),C.length>1&&h(Be,{icon:h(Z,null),onClick:w,label:"Show / hide columns",variant:"right"}),h(Be,{icon:h(J,null),onClick:y,label:"Filter by columns",variant:"right"})))}var De=z({truncated:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),Le=function(e){var t=e.text,n=e.tooltip,r=void 0===n?t:n,i=e.align,a=De({});return h(s,{title:r,className:a.truncated,style:{textAlign:i}},h("span",null,t))},Ge=["role"],Ee=["key","title","role"],je=["key","role"],We=["title"],Ve=["title"],Me=["key","role"],_e=["key","role"],Ke=function e(t){return t[0].columns?e(t[0].columns):t[0]},Ue=function(e,t,n){return void 0===n&&(n="left"),[e,{style:{justifyContent:"right"===n?"flex-end":"flex-start",alignItems:"flex-start",display:"flex"}}]},Je=function(e,t){var n=t.column;return Ue(e,0,n&&n.align)},Ze=function(e,t){var n=t.cell;return Ue(e,0,n.column&&n.column.align)},$e={Filter:function(e){var t=e.columns,n=e.column,r=n.id,i=n.filterValue,a=n.setFilter,o=n.render,l=f.useState(i||""),s=l[0],c=l[1];b(function(){c(i||"")},[i]);var u=Ke(t)===n;return h(d,{name:r,label:o("Header"),InputLabelProps:{htmlFor:r},value:s,autoFocus:u,variant:"standard",onChange:function(e){c(e.target.value)},onBlur:function(e){a(e.target.value||void 0)}})},Cell:function(e){var t=e.column.align;return h(Le,{text:e.cell.value,align:void 0===t?"left":t})},Header:function(e){var t=e.column;return h(Fragment,null,t.id.startsWith("_")?null:function(e){for(var t,n="",r=0,i=!0,a=!0;r<e.length;)t=e.charCodeAt(r),0===r?n+=e[r].toUpperCase():!a&&t>=65&&t<=90||!i&&t>=48&&t<=57?(n+=" ",n+=e[r].toUpperCase()):n+=e[r].toLowerCase(),i=t>=48&&t<=57,a=t>=65&&t<=90,r++;return n}(t.id))},minWidth:30,width:150,maxWidth:200},qe=[w,y,N,k,P,R,T,S,A,function(e){e.allColumns.push(function(e){return[{id:"_selector",disableResizing:!0,disableGroupBy:!0,minWidth:45,width:45,maxWidth:45,Aggregated:void 0,Header:function(e){return h(we,(0,e.getToggleAllRowsSelectedProps)())},Cell:function(e){return h(ye,e.row.getToggleRowSelectedProps())}}].concat(e)}),e.useInstanceBeforeDimensions.push(function(e){e.headerGroups[0].headers[0].canResize=!1})}],Qe={fuzzyText:ee,numeric:ne};function Xe(e){var t,n,r,i,a=e.name,o=e.columns,l=e.onAdd,c=e.onDelete,d=e.onEdit,f=e.onClick,w=de(),y=(t="tableState:"+a,n={},r=v(function(){if("undefined"==typeof window)return n;try{var e=window.localStorage.getItem(t);return e?JSON.parse(e):n}catch(e){return console.log(e),n}}),i=r[1],[r[0],x(function(e){try{i(e),window.localStorage.setItem(t,JSON.stringify(e))}catch(e){console.log(e)}},[t])])[1],N=C.apply(void 0,[$({},e,{columns:o,filterTypes:Qe,defaultColumn:$e,initialState:{hiddenColumns:o.filter(function(e){return!1===e.show}).map(function(e){return e.id||e.accessor})}})].concat(qe)),k=N.getTableProps,P=N.headerGroups,R=N.getTableBodyProps,T=N.page,S=N.prepareRow,A=function(e,t){var n=v(e),r=n[0],i=n[1];return b(function(){var t=setTimeout(function(){i(e)},500);return function(){clearTimeout(t)}},[e,500]),r}(N.state);b(function(){y({sortBy:A.sortBy,filters:A.filters,pageSize:A.pageSize,columnResizing:A.columnResizing,hiddenColumns:A.hiddenColumns})},[y,A]);var z=function(e){return function(){f&&!e.column.isGrouped&&!e.row.isGrouped&&"_selector"!==e.column.id&&f(e.row)}},F=q(k(),Ge);return h(Fragment,null,h(He,{instance:N,onAdd:l,onDelete:c,onEdit:d}),h(Y,{instance:N}),h(me,F,h(ge,null,P.map(function(e){var t=e.getHeaderGroupProps(),n=t.key,r=q(t,Ee);return h(fe,$({key:n},r),e.headers.map(function(e){var t={textAlign:e.align?e.align:"left "},n=e.getHeaderProps(Je),r=n.key,i=q(n,je),a=e.getGroupByToggleProps(),o=a.title,l=void 0===o?"":o,c=q(a,We),d=e.getSortByToggleProps(),p=d.title,g=void 0===p?"":p,f=q(d,Ve);return h(ve,$({key:r},i),e.canGroupBy&&h(s,{title:l},h(u,$({active:!0,direction:e.isGrouped?"desc":"asc",IconComponent:m},c,{className:w.headerIcon}))),e.canSort?h(s,{title:g},h(u,$({active:e.isSorted,direction:e.isSortedDesc?"desc":"asc"},f,{className:w.tableSortLabel,style:t}),e.render("Header"))):h(Ce,{style:t},e.render("Header")),e.canResize&&h(Ne,{column:e}))}))})),h(pe,R(),T.map(function(e){S(e);var t=e.getRowProps(),n=t.key,r=q(t,Me);return h(be,$({key:n},r,{className:g({rowSelected:e.isSelected,clickable:f})}),e.cells.map(function(t){var n=t.getCellProps(Ze),r=n.key,i=q(n,_e);return h(xe,$({key:r},i,{onClick:z(t)}),t.isGrouped?h(Fragment,null,h(u,$({classes:{iconDirectionAsc:w.iconDirectionAsc,iconDirectionDesc:w.iconDirectionDesc},active:!0,direction:e.isExpanded?"desc":"asc",IconComponent:p},e.getToggleRowExpandedProps(),{className:w.cellIcon}))," ",t.render("Cell",{editable:!1})," ","(",e.subRows.length,")"):t.isAggregated?t.render("Aggregated"):t.isPlaceholder?null:t.render("Cell"))}))}))),h(Te,{instance:N}))}export{Xe as Table};
//# sourceMappingURL=react-table-mui-ts.modern.js.map
